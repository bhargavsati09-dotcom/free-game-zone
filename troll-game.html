<!DOCTYPE html>
<html>
<head>
  <title>Troll Platform Game</title>
  <style>
    body {
      margin: 0;
      background: #0b0f2a;
      overflow: hidden;
      font-family: Arial;
      color: white;
      text-align: center;
    }
    canvas {
      background: #1a1f4a;
      display: block;
      margin: auto;
    }
  </style>
</head>
<body>

<h2>Troll Platform Game</h2>
<p>Use Arrow Keys to move and jump</p>

<canvas id="game" width="600" height="350"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 50, y: 250, w: 20, h: 20, vy: 0, onGround: false };

let gravity = 0.6;
let jumpPower = -10;

let platforms = [
  {x:0, y:300, w:600, h:50},      // ground
  {x:150, y:230, w:80, h:10},
  {x:300, y:190, w:80, h:10},
  {x:470, y:150, w:80, h:10}      // yellow goal
];

let spikes = [
  {x:220, y:290, w:20, h:10},
  {x:240, y:290, w:20, h:10}
];

let keys = {};

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function update() {
  // movement
  if (keys["ArrowLeft"]) player.x -= 3;
  if (keys["ArrowRight"]) player.x += 3;

  // jump
  if (keys["ArrowUp"] && player.onGround) {
    player.vy = jumpPower;
    player.onGround = false;
  }

  // gravity
  player.vy += gravity;
  player.y += player.vy;

  // collision with platforms
  player.onGround = false;
  platforms.forEach(p => {
    if (
      player.x < p.x + p.w &&
      player.x + player.w > p.x &&
      player.y < p.y + p.h &&
      player.y + player.h > p.y
    ) {
      player.y = p.y - player.h;
      player.vy = 0;
      player.onGround = true;
    }
  });

  // spike collision â†’ restart
  spikes.forEach(s => {
    if (
      player.x < s.x + s.w &&
      player.x + player.w > s.x &&
      player.y < s.y + s.h &&
      player.y + player.h > s.y
    ) {
      player.x = 50;
      player.y = 250;
    }
  });
}

function draw() {
  ctx.clearRect(0,0,600,350);

  // player
  ctx.fillStyle = "lime";
  ctx.fillRect(player.x, player.y, player.w, player.h);

  // platforms
  ctx.fillStyle = "cyan";
  platforms.forEach(p => ctx.fillRect(p.x, p.y, p.w, p.h));

  // spikes
  ctx.fillStyle = "red";
  spikes.forEach(s => ctx.fillRect(s.x, s.y, s.w, s.h));

  // goal
  ctx.fillStyle = "yellow";
  ctx.fillRect(500,130,20,20);
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
